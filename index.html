<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    <!-- Primary Meta Tags -->
    <title>hieunotes</title>
    <meta name="title" content="hieunotes" />
    <meta name="description" content="Kh√¥ng c√≥ g√¨ qu√Ω h∆°n ƒë·ªôc l·∫≠p, t·ª± do." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="/" />
    <meta property="og:title" content="hieunotes" />
    <meta property="og:description" content="Kh√¥ng c√≥ g√¨ qu√Ω h∆°n ƒë·ªôc l·∫≠p, t·ª± do." />
    <meta property="og:image" content="banner.png" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="/" />
    <meta property="twitter:title" content="hieunotes" />
    <meta property="twitter:description" content="Kh√¥ng c√≥ g√¨ qu√Ω h∆°n ƒë·ªôc l·∫≠p, t·ª± do." />
    <meta property="twitter:image" content="banner.png" />
    
    <!-- Favicon -->
    <link href="favicon.ico" rel="icon" type="image/x-icon"/>

    <!-- Libraries -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <!-- Custom Styles -->
    <style>
        :root {
            --primary: #ff4444;
            --secondary: #f8f9fa;
            --text-dark: #2c3e50;
            --text-muted: #7f8c8d;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            --bg-gradient: linear-gradient(135deg, #f9ecec 0%, #e8f0fe 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            background: var(--bg-gradient);
            min-height: 100vh;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .container-custom {
            max-width: 700px;
            margin: 3rem auto;
            padding: 0 1rem;
        }

        .card-custom {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            backdrop-filter: blur(10px);
            transition: transform 0.3s ease;
        }

        .card-custom:hover {
            transform: translateY(-5px);
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header img {
            width: 100px;
            border: 3px solid #fff;
            box-shadow: var(--shadow);
        }

        .header .title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-dark);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .header .title:hover {
            color: var(--primary);
        }

        .social-links {
            gap: 1rem;
        }

        .social-links a {
            color: var(--text-muted);
            font-size: 1.2rem;
            transition: color 0.3s ease;
        }

        .social-links a:hover {
            color: var(--primary);
        }

        /* Navigation */
        .nav-custom {
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .nav-custom a {
            color: var(--text-dark);
            font-weight: 600;
            text-decoration: none;
            padding-bottom: 0.3rem;
            position: relative;
            transition: color 0.3s ease;
        }

        .nav-custom a:hover {
            color: var(--primary);
        }

        .nav-custom a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background: var(--primary);
            transition: width 0.3s ease;
        }

        .nav-custom a:hover::after {
            width: 100%;
        }

        /* Weather & Countdown */
        .weather, .countdown {
            text-align: center;
        }

        .weather h4 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .countdown h2 {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 1.5rem;
            animation: pulse 2s infinite;
        }

        .countdown-grid {
            gap: 1.5rem;
        }

        .countdown-item span:first-child {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .countdown-item span:last-child {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Post Section */
        .post-input textarea {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 1rem;
            resize: none;
        }

        .post-input button {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 0.75rem;
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        .post-input button:hover {
            background: #e63939;
        }

        .post-item {
            border-bottom: 1px solid #eee;
            padding-bottom: 1.5rem;
        }

        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @media (max-width: 768px) {
            .header img { width: 80px; }
            .header .title { font-size: 1.5rem; }
            .nav-custom { flex-direction: column; gap: 1rem; }
            .countdown-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="container-custom">
        <!-- Header -->
        <div class="card-custom header">
            <img src="img/avatar_nobg.png" alt="hieunotes" class="rounded-circle">
            <a href="/" class="title">ƒê·∫∑ng Trung Hi·∫øu</a>
            <div class="d-flex justify-content-center social-links mt-3">
                <a href="//www.facebook.com/hieu.vntn" target="_blank"><i class="bi bi-facebook"></i></a>
                <a href="//m.me/hieu.vntn" target="_blank"><i class="bi bi-messenger"></i></a>
                <a href="https://x.com/hieunotes" target="_blank"><i class="bi bi-twitter"></i></a>
                <a href="//www.instagram.com/hieu.vntn" target="_blank"><i class="bi bi-instagram"></i></a>
                <a href="mailto:hieunotes@outlook.com"><i class="bi bi-envelope-fill"></i></a>
            </div>
            <hr style="width: 100px; margin: 1rem auto;">
        </div>

        <!-- Navigation -->
        <div class="card-custom">
            <ul class="nav nav-custom d-flex">
                <li><a href="//tayninh.vercel.app" target="_blank">L·ªãch c√∫p ƒëi·ªán</a></li>
                <li><a href="#">Kh√¥ng gian</a></li>
                <li><a href="#">R√∫t g·ªçn link</a></li>
            </ul>
        </div>

        <!-- Weather -->
        <div class="card-custom weather">
            <h4><span id="location"></span> - <span id="currentDate"></span></h4>
            <p>Nhi·ªát ƒë·ªô: <b id="temperature"></b>¬∞C</p>
            <p>C·∫£m gi√°c nh∆∞: <b id="feelsLike"></b>¬∞C</p>
            <p>ƒê·ªô ·∫©m: <b id="humidity"></b></p>
            <p>T√¨nh tr·∫°ng: <b id="status"></b></p>
        </div>

        <!-- Countdown -->
        <div class="card-custom countdown">
            <h2 id="headline"></h2>
            <div id="countdown" class="d-grid countdown-grid">
                <div class="countdown-item"><span id="days">--</span><span>Ng√†y</span></div>
                <div class="countdown-item"><span id="hours">--</span><span>Gi·ªù</span></div>
                <div class="countdown-item"><span id="minutes">--</span><span>Ph√∫t</span></div>
                <div class="countdown-item"><span id="seconds">--</span><span>Gi√¢y</span></div>
            </div>
            <div id="content" class="emoji mt-4" style="display: none;">
                <span class="h1 mx-1">ü•≥</span>
                <span class="h1 mx-1">üéâ</span>
                <span class="h1 mx-1">ü•≥</span>
            </div>
        </div>

        <!-- Post Section -->
        <div class="card-custom post-input">
            <div class="d-flex align-items-center mb-4">
                <img src="avatar.svg" alt="User Avatar" class="rounded-circle me-2" width="40" height="40">
                <textarea id="contentInput" class="form-control" placeholder="C√≥ g√¨ m·ªõi?" rows="3"></textarea>
            </div>
            <div id="message" class="mb-3"></div>
            <button id="submitBtn" class="btn w-100">ƒêƒÉng</button>
            <div id="data" class="mt-4"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            // Fetch and Render Posts
            function fetchDataAndRender() {
                const url = "https://opensheet.elk.sh/15cyTIgpNtdJEoY2Mmp4mq6jln2JCBJHOmLGJbsorjeE/blog!A1:Z1000";
                $.getJSON(url, function (data) {
                    const $container = $('#data');
                    $container.empty();
                    data.reverse().forEach(item => {
                        if (!item.TITLE && !item.CONTENT && !item.DATE) return;
                        const html = `
                            <div class="post-item mb-4">
                                <div class="d-flex align-items-start">
                                    <img src="avatar.svg" alt="User Avatar" class="rounded-circle me-2" width="40" height="40">
                                    <div>
                                        ${item.TITLE ? `<p class="fw-bold mb-1">${item.TITLE} <small class="text-muted">${item.DATE}</small></p>` : ''}
                                        ${item.CONTENT ? `<p>${item.CONTENT}</p>` : ''}
                                    </div>
                                </div>
                            </div>
                        `;
                        $container.append(html);
                    });
                }).fail(function (error) {
                    console.error("L·ªói khi l·∫•y d·ªØ li·ªáu:", error);
                });
            }
            fetchDataAndRender();

            // Submit Post
            $('#submitBtn').on('click', function () {
                const content = $('#contentInput').val().trim().replace(/\n/g, '<br>');
                const $message = $('#message');
                $(this).prop('disabled', true);

                if (!content) {
                    $message.text('Vui l√≤ng nh·∫≠p n·ªôi dung.').css('color', 'red');
                    setTimeout(() => $message.text(''), 3000);
                    $(this).prop('disabled', false);
                } else {
                    $.ajax({
                        url: `https://sheet.hns.workers.dev/?CONTENT=${encodeURIComponent(content)}`,
                        type: 'POST'
                    });
                    $('#contentInput').val('');
                    $message.text('ƒê√£ ƒëƒÉng. Trang s·∫Ω t·∫£i l·∫°i sau 30 gi√¢y.').css('color', 'green');
                    setTimeout(() => $message.text(''), 3000);
                    setTimeout(() => location.reload(), 30000);
                    setTimeout(() => $(this).prop('disabled', false), 3000);
                }
            });

            // Weather
            fetch('https://weather-tayninh.hns.workers.dev/')
                .then(response => response.json())
                .then(data => {
                    const weather = data.Data.data.datainfo;
                    $('#location').text(weather.location);
                    $('#currentDate').text(weather.currentDate);
                    $('#temperature').text(weather.temperature);
                    $('#feelsLike').text(weather.feels_like);
                    $('#humidity').text(weather.humidity);
                    $('#status').text(weather.status);
                })
                .catch(error => console.error('L·ªói th·ªùi ti·∫øt:', error));

            // Countdown
            const apiUrl = "https://opensheet.elk.sh/15cyTIgpNtdJEoY2Mmp4mq6jln2JCBJHOmLGJbsorjeE/app!A1:Z2";
            $.getJSON(apiUrl, function (data) {
                if (data.length > 0) {
                    const { date, txt, status } = data[0];
                    const countDown = new Date(date).getTime();
                    const x = setInterval(function () {
                        const now = new Date().getTime();
                        const distance = countDown - now;
                        $('#headline').text(txt);
                        $('#days').text(Math.floor(distance / (1000 * 60 * 60 * 24)));
                        $('#hours').text(Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));
                        $('#minutes').text(Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)));
                        $('#seconds').text(Math.floor((distance % (1000 * 60)) / 1000));

                        if (distance < 0) {
                            $('#headline').text(status);
                            $('#countdown').hide();
                            $('#content').show();
                            clearInterval(x);
                        }
                    }, 1000);
                }
            }).fail(function () {
                console.error("L·ªói API countdown:", error);
            });
        });
    </script>
</body>
</html>
